# 4. Алгебра

## Понятие алгебры
$] \ \exists \ \Omega = \{\omega_1, \omega_2, \dots, \omega_n, \dotsc\} \ -$ набор элементарных исходов.
$\mathfrak{A} -$ событие = выделенный набор подмножеств, который может не совпадать со всем множеством.

::: info `def`  Алгебра
Набор подмножеств называется алгеброй, если в нём есть невозможное и достоверное событие, а также определены и существуют суммы, произведения и разности для любых двух элементов подмножества.
:::

::: info `def`  Сигма-алгебра
Алгебра называется сигма-алгеброй, если объединение и пересечение любого счетного набора $\{A_i\}, i \in I$, где I - счетный набор индексов, принадлежит данной алгебре.
:::

Определение сигма-алгебры избыточно.

::: info `def`  Случайное событие
Элемент множества $\mathfrak{A}$ 
:::

Для $\forall A \in \mathfrak{A}$ определена $P(A)$ (вероятностная мера - числовая функция), удовлетворяющая следующим 4 аксиомам:

- **Аксиома неотрицательности**: $P(A) >= 0$.
- **Аксиома нормирования**: вероятность достоверного события равна 1 ($P(\Omega) = 1$).
- **Аксиома счетной аддитивности**: $ ]\{A_i\}, i \in I, \in \mathfrak{a}. P(\bigcup_{i \in I} A_i) = \underset{i \in I}{\sum} P(A_i)$. Вероятность объединения - сумма вероятностей.
- **Аксиома полноты**: $] \exists A \in \mathfrak{a}. \ P(A) = 0 \rightarrow \forall B \subset A: P(B) = 0$. 
    
    Если вероятность события А = 0 , то вероятность определена 0 для всех подмножеств А, при этом $P$ - вероятностная мера, а тройка $\Omega, \ \mathfrak{A},\ \mathbb{P}$ - вероятностное пространство.
 

::: info `def`  Вероятностное пространство
Множество элементарных исходов, построенная на нем сигма-алгебра и определенная на ней вероятностная мера.
:::

## Основные соотношения между вероятностными событиями
 
- Противоположное событие $\overline A$: сумма с исходным = достоверное, произведение с исходным - невозможное, его вероятность = $1 - P(A)$. 
    
    ::: details `prf` Доказательство  
    
    $P(\Omega) = P(A + \overline{A}) = P(A) + P(\overline A) = 1$.
    :::

- $]\ A \subset B, P(A) <= P(B),\ P(B) = P(A) + P(B \setminus A) \geq 0$.

    ::: details `prf` Доказательство 

    Используя аксиомы счетной аддитивности и неотрицательности можно считать, что вероятность суммы равна сумма вероятностей.

- Вероятность события А не превышает 1. ($P(A) \leq 1$).

    ::: details `prf` Доказательство 
    
    $A \subset \Omega \rightarrow P(A) \leq P(\Omega)\ (2^\circ)$.
    :::

- Вероятность невозможного события = 0. ($P(\varnothing) = 0$).

    ::: details `prf` Доказательство 

    $\overline{\varnothing} = \Omega \rightarrow P(\overline{\varnothing}) = P(\Omega) \rightarrow P(\varnothing) = 1 - P(\Omega) = 1 - 1 = 0$.
    :::
    
- Про взаимодействие двух событий:
         
  1. $P(A \setminus B) = P(A) - P(AB)$
  2. $P(B \setminus A) = P(B) - P(AB)$
  3. $P(A+B)=P(A)+P(B) - P(AB)$
         
    ::: details `prf` Доказательство

     1. $A=A\setminus_ B + AB$, тогда $P(A)=P(A\setminus B) + P(AB)$. Выразим $P(A\setminus B) = P(A)-P(AB)$, ч.т.д.
     2. $B=B\setminus_ A + BA$, тогда $P(B)=P(B\setminus A) + P(AB)$. Выразим $P(B\setminus A) = P(B)-P(AB)$, ч.т.д.
     3. $A+B=A\setminus B + B\setminus A+AB$, они несовместны между собой. По аксиоме счетной аддитивности $P(A+B) = P(A \setminus B) + P(B \setminus A) + P(AB)$
    :::

- Формула сложения для n слагаемых: 
    
    $A_1, \ A_2, \dotsc, \ A_n $

    $P_1 = \underset{i = 1}{\overset{n}{\sum}}P(A_i)$

    $P_2 = \underset{\ 1 \leq i < j \leq n}{\overset{n}{\sum}}P(A_i A_j)$

    $\dotsc$
    
    $P_n=(A_1 \cdot \dotsc \cdot A_n)$

    $P(A_1+\dotsc+A_n) = P_1 - P_2 + \dotsc \pm P_n$

    ::: details `prf` Доказательство 
    
    Методом математической индукции:

    n = 2: по $5^\circ$ $P(A_1+A_2) = P(A_1) + P(A_2) - P(A_1A_2)$

    n = k: $P(\underset{i = 1}{\overset{k}{\sum}}A_i) = (\underset{i = 1}{\overset{k}{\sum}}P(A_i)) - (\underset{\ 1 \leq i < j \leq k}{\sum}P(A_i A_j)) + \dotsc \pm P(A_1 \cdot \dotsc \cdot A_k)$

    n = k+1: 
    
    *так как оригинальное доказательство непонятно, то привожу более доступный вид*

    Рассмотрим $P(\underset{i = 1}{\overset{k+1}{\sum}}A_i) = P(\underset{i = 1}{\overset{k}{\sum}}A_i + A_{k+1})$. В предыдущем шаге мы предположили значение $P(\underset{i = 1}{\overset{k}{\sum}}A_i) $. А теперь по свойству $5^\circ:$ 
    $$ P(\underset{i = 1}{\overset{k+1}{\sum}}A_i) = P(\underset{i = 1}{\overset{k}{\sum}}A_i)+P(A_{k+1}) - P(\underset{i = 1}{\overset{k}{(\sum}}A_i) \cdot A_{k+1})$$

    Начинаем мазохизм и страдание, вспоминаем включения-исключения из курса дискретной математики и подставляем в $P(\underset{i = 1}{\overset{k}{(\sum}}A_i) \cdot A_{k+1})$:

    Это будет: $(\underset{i = 1}{\overset{k}{\sum}}P(A_i \ \cdot \ A_{k+1})) - (\underset{\ 1 \leq i < j \leq k}{\sum}P(A_i A_j A_{k+1})) + \dotsc \pm P(A_1 \cdot \dotsc \cdot A_k \cdot A_{k+1})$

    Теперь поставим: 
    
    $(\underset{i = 1}{\overset{k}{\sum}}P(A_i)) - (\underset{\ 1 \leq i < j \leq k}{\sum}P(A_i A_j))+ \dotsc \pm P(A_1 \cdot \dotsc \cdot A_k) + P(A_{k+1}) -$
    $((\underset{i = 1}{\overset{k}{\sum}}P(A_i \ \cdot \ A_{k+1})) - (\underset{\ 1 \leq i < j \leq k}{\sum}P(A_i A_j A_{k+1})) + \dotsc \pm P(A_1 \cdot \dotsc \cdot A_k \cdot A_{k+1}))$. 
    
    Когда мы это упростим и сгруппируем, то получим ту формулу, которую нам надо =)
    :::